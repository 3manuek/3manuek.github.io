
<p>OOM killer is a OS mechanism to avoid processes to consume more resources than the available in the host.
It may look as a good idea for avoid scenarios wether certain proceses behave unexpectely.</p>

<p>swap configuration vm.swappiness=1 
overcommit memory, applies to MySQL ?</p>

<p>There is another mechanism wether the OS <em>scores</em> processes. THe higher the score, the more likely to be killed
the process will be. I’ve been seeing fixes around by setting -20 or other numbers to the oom_score_adj. You may
be aware that this only applies an arithmetic operations to the current score, but it won’t be a permanent fix,
as scores changes according to the process status. The best source is <a href="http://man7.org/linux/man-pages/man5/proc.5.html">the proc man page</a>.
However, oom_adj is deprecated in 2.6.36 in favor of oom_score_adj.</p>

<p>http://www.oracle.com/technetwork/articles/servers-storage-dev/oom-killer-1911807.html</p>

<p>No consensus on an elegant way to do this:</p>

<p>https://groups.google.com/a/percona.com/forum/?hl=en#!msg/experts/78USb3jqJnA/3AlUYsLXEgAJ;context-place=forum/experts</p>

<p>Nor neiether Maria:
https://jira.mariadb.org/browse/MDEV-9264</p>

<p>persist in cron line:</p>

<table>
  <tbody>
    <tr>
      <td>*/1 * * * * root (pidof mysqld</td>
      <td>while read PID; do echo -1000 &gt; /proc/$PID/oom_score_adj; done)</td>
    </tr>
  </tbody>
</table>

<p>The -1000 has a reason, and it is explained clearly in the manpage:</p>

<blockquote>
  <p>The value of oom_score_adj is added to the badness score
             before it is used to determine which task to kill.  Acceptable
             values range from -1000 (OOM_SCORE_ADJ_MIN) to +1000
             (OOM_SCORE_ADJ_MAX).  This allows user space to control the
             preference for OOM-killing, ranging from always preferring a
             certain task or completely disabling it from OOM killing.  The
             lowest possible value, -1000, is equivalent to disabling OOM-
             killing entirely for that task, since it will always report a
             badness score of 0.</p>
</blockquote>

<p>As oom_score is a setting that can increase thourgh server acitivty, you may want to ensure that is
always 0.</p>

<div class="highlighter-rouge"><pre class="highlight"><code># cat /proc/$(pidof mysqld)/oom_score
0
</code></pre>
</div>

<p>What about overcommit:
https://www.kernel.org/doc/Documentation/vm/overcommit-accounting</p>

